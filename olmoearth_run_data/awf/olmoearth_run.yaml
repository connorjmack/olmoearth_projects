window_prep:
  sampler:
    class_path: olmoearth_run.runner.tools.samplers.noop_sampler.NoopSampler
  labeled_window_preparer:
    class_path: olmoearth_run.runner.tools.labeled_window_preparers.point_to_raster_window_preparer.PointToRasterWindowPreparer
    init_args:
      window_buffer: 31  # in pixels
      window_resolution: 10.0
      dtype: INT32
      nodata_value: 9
  data_splitter:
    class_path: olmoearth_run.runner.tools.data_splitters.spatial_data_splitter.SpatialDataSplitter
    init_args:
      train_prop: 0.75
      val_prop: 0.25
      test_prop: 0.0
      grid_size: 128 # in pixels
  label_layer: "label"
  group_name: "spatial_split"
  split_property: "split"

partition_strategies:
  partition_request_geometry:
    class_path: olmoearth_run.runner.tools.partitioners.grid_partitioner.GridPartitioner
    init_args:
      grid_size: 0.25

  prepare_window_geometries:
    class_path: olmoearth_run.runner.tools.partitioners.grid_partitioner.GridPartitioner
    init_args:
      grid_size: 1024
      output_projection:
        class_path: rslearn.utils.geometry.Projection
        init_args:
          crs: EPSG:3857
          x_resolution: 10
          y_resolution: -10
      use_utm: true

postprocessing_strategies:
  process_dataset:
    class_path: olmoearth_run.runner.tools.postprocessors.combine_geotiff.CombineGeotiff

  process_partition:
    class_path: olmoearth_run.runner.tools.postprocessors.combine_geotiff.CombineGeotiff

  process_window:
    class_path: olmoearth_run.runner.tools.postprocessors.noop_raster.NoopRaster

inference_results_config:
  data_type: RASTER
  classification_fields:
    - property_name: segment
      band_index: 1
      allowed_values:
        - value: 0
          label: woodland_forest
          color: [38, 115, 77]
        - value: 1
          label: open_water
          color: [70, 130, 180]
        - value: 2
          label: shrubland_savanna
          color: [143, 188, 143]
        - value: 3
          label: herbaceous_wetland
          color: [46, 139, 87]
        - value: 4
          label: grassland_barren
          color: [189, 183, 107]
        - value: 5
          label: agriculture_settlement
          color: [102, 205, 170]
        - value: 6
          label: montane_forest
          color: [34, 139, 34]
        - value: 7
          label: lava_forest
          color: [255, 140, 0]
        - value: 8
          label: urban_dense_development
          color: [178, 34, 34]
        - value: 9
          label: unknown
          color: [192, 192, 192]
  detection_objects: null
  regression_fields: null
